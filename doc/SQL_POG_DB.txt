CREATE DATABASE pog_db;

USE pog_db;

CREATE TABLE member(
    id INT AUTO_INCREMENT NOT NULL,
    first_name VARCHAR(20),
    last_name VARCHAR(20),
    email VARCHAR(50),
    PRIMARY KEY(id));

INSERT INTO member(first_name, last_name, email) VALUES('Lay', 'Heng', 'lay@gmail.com');
INSERT INTO member(first_name, last_name, email) VALUES('Zan', 'Wang', 'zan@gmail.com');
INSERT INTO member(first_name, last_name, email) VALUES('John', 'Johnson', 'john@gmail.com');
INSERT INTO member(first_name, last_name, email) VALUES('Charle', 'Johnson', 'charle@gmail.com');



CREATE TABLE non_member(
    id INT AUTO_INCREMENT NOT NULL,
    first_name VARCHAR(20),
    last_name VARCHAR(20),
    email VARCHAR(50),
    PRIMARY KEY(id));

INSERT INTO non_member(first_name, last_name, email) VALUES('Cat1', 'Cat', 'cat1@gmail.com');
INSERT INTO non_member(first_name, last_name, email) VALUES('Bird1', 'Bird', 'bird1@gmail.com');
INSERT INTO non_member(first_name, last_name, email) VALUES('Kinkon1', 'Kinkon', 'kinkon1@gmail.com');


create table pog_db.group(
     group_id int AUTO_INCREMENT NOT NULL,
     name VARCHAR(50),
     owner_id int,
     PRIMARY KEY (group_id),
     foreign key (owner_id) references member(id));


INSERT INTO pog_db.group(name, owner_id) VALUES('Fishing', 1); 
INSERT INTO pog_db.group(name, owner_id) VALUES('Sea Boat', 2);


CREATE TABLE gmlist(
    gid int,
    mid int,
    PRIMARY KEY (gid, mid),
    FOREIGN KEY (gid) REFERENCES pog_db.group(group_id) ON DELETE CASCADE,
    FOREIGN KEY (mid) REFERENCES member(id) ON DELETE CASCADE
    );

INSERT INTO gmlist VALUES(1, 1);
INSERT INTO gmlist VALUES(1, 4);


CREATE TABLE pog_db.comment(
    id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    text VARCHAR(200)
    );

INSERT INTO pog_db.comment VALUES(1, 'test');


CREATE TABLE content(
    id INT AUTO_INCREMENT NOT NULL,
    post_message VARCHAR(300),
    dop DATE,
    comment_id int,
    mid int,
    gid int,
    PRIMARY KEY(id),
    FOREIGN KEY (comment_id) REFERENCES pog_db.comment(id),
    FOREIGN KEY (mid) REFERENCES member(id),
    FOREIGN KEY (gid) REFERENCES pog_db.group(group_id)
    );

INSERT INTO `content`(`id`, `post_message`, `dop`, `comment_id`, `mid`, `gid`) VALUES (1,'test',20160710,1,1,1);


CREATE TABLE email(
    id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    sender_email VARCHAR(50) NOT NULL,
    receiver_email VARCHAR(50) NOT NULL,
    dts datetime DEFAULT CURRENT_TIMESTAMP,
    subject VARCHAR(100),
    email_content VARCHAR(500),
    unread TINYINT(1) DEFAULT 1
    );

INSERT INTO email(sender_email, receiver_email, subject, email_content) VALUES ('lay@gmail.com',
'zan@gmail.com', 'Test email 1', 'Hello, this a test email 1');
INSERT INTO email(sender_email, receiver_email, subject, email_content) VALUES ('lay@gmail.com',
'xindi@gmail.com', 'Test email 2', 'Hello, this a test email 2');
INSERT INTO email(sender_email, receiver_email, subject, email_content) VALUES ('xindi@gmail.com',
'lay@gmail.com', 'Test email 3', 'Hello, this a test email 3');
INSERT INTO email(sender_email, receiver_email, subject, email_content) VALUES ('zan@gmail.com',
'xindi@gmail.com', 'Test email 4', 'Hello, this a test email 4. multi-lines text\n test multiple lines \n');


CREATE TABLE message(
    id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    sender_id INT NOT NULL,
    receiver_id INT NOT NULL,
    dts datetime DEFAULT CURRENT_TIMESTAMP,
    message_content VARCHAR(300)
    );

INSERT INTO message(sender_id, receiver_id, message_content) values (1, 40, 'message test 1');
INSERT INTO message(sender_id, receiver_id, message_content) values (1, 41, 'message test 2');
INSERT INTO message(sender_id, receiver_id, message_content) values (40, 1, 'message test 3');
INSERT INTO message(sender_id, receiver_id, message_content) values (41, 1, 'message test 4');
INSERT INTO message(sender_id, receiver_id, message_content) values (43, 40, 'message test 5');